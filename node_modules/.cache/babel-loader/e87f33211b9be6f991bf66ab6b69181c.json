{"ast":null,"code":"import _objectSpread from \"/Users/phoebe/homework/obdesign/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport { BUY_PRODUCT, UPDATE_CART } from '../action/ShopCar';\nconst initialState = {\n  cartDate: [],\n  totalCount: 0\n};\n\nconst ShopCar = (state = initialState, action) => {\n  switch (action.type) {\n    case BUY_PRODUCT:\n      const existing = state.cartDate.find(val => val.name === action.data.name);\n\n      if (existing) {\n        return _objectSpread({}, state, {\n          cartDate: state.cartDate.map(val => {\n            if (val.name === action.data.name) {\n              return _objectSpread({}, val, {\n                quantity: val.quantity + 1\n              });\n            }\n\n            return _objectSpread({}, val);\n          }) // totalCount: state.cartDate.reduce(( acc, cur ) => acc + cur.quantity,0),\n\n        });\n      }\n\n      return _objectSpread({}, state, {\n        cartDate: [...state.cartDate, action.data] // totalCount: state.cartDate.reduce(( acc, cur ) => acc + cur.quantity,0),\n\n      });\n\n    case UPDATE_CART:\n      return _objectSpread({}, state, {\n        cartDate: state.cartDate.map(val => {\n          if (val.name === action.data.name) {\n            return _objectSpread({}, action.data);\n          }\n\n          return _objectSpread({}, val);\n        }) // totalCount: state.cartDate.reduce(( acc, cur ) => acc + cur.quantity,0),\n\n      });\n\n    default:\n      return state;\n  }\n}; // const Product = (state=[],action) => {\n//     switch (action.type){\n//         case 'BUY_PRODUCT':\n//             return{\n//                 id: action.id,\n//                 product: {...action.product},\n//                 quantity: action.quantity\n//             };\n//         case 'NOBUY_PRODUCT':\n//             return Object.assign([], state).filter(state=>{\n//                 return state.id !== action.id\n//             })\n//         case 'CHANGENUM_PRODUCT':\n//             if(state.id !== action.id)\n//                 return state;\n//             return Object.assign({},state,{\n//                 quantity: action.quantity\n//             })\n//         default:\n//             return state;\n//     }\n// }\n// const ShopCar = (state=[],action) => {\n//     switch (action.type){\n//         case 'BUY_PRODUCT':\n//             if(state.map(t => {return t.product.id}).indexOf(action.product.id) >= 0){\n//                 alert(\"此商品已加入購物車\");\n//                 return state;\n//             }\n//             else\n//                 return [\n//                     ...state,\n//                     Product(state,action)\n//                 ];\n//         case 'NOBUY_PRODUCT':\n//             return Product(state,action);\n//         case 'CHANGENUM_PRODUCT':\n//             return state.map(t=>Product(t,action));\n//         default:\n//             return state;\n//     }\n// }\n\n\nexport default ShopCar;","map":{"version":3,"sources":["/Users/phoebe/homework/obdesign/src/reducer/ShopCar.js"],"names":["BUY_PRODUCT","UPDATE_CART","initialState","cartDate","totalCount","ShopCar","state","action","type","existing","find","val","name","data","map","quantity"],"mappings":";AAAA,SACIA,WADJ,EAEIC,WAFJ,QAGO,mBAHP;AAKA,MAAMC,YAAY,GAAG;AACjBC,EAAAA,QAAQ,EAAE,EADO;AAEjBC,EAAAA,UAAU,EAAE;AAFK,CAArB;;AAIA,MAAMC,OAAO,GAAG,CAACC,KAAK,GAACJ,YAAP,EAAoBK,MAApB,KAA+B;AAC3C,UAAQA,MAAM,CAACC,IAAf;AACI,SAAKR,WAAL;AACI,YAAMS,QAAQ,GAAGH,KAAK,CAACH,QAAN,CAAeO,IAAf,CAAoBC,GAAG,IAAIA,GAAG,CAACC,IAAJ,KAAaL,MAAM,CAACM,IAAP,CAAYD,IAApD,CAAjB;;AACA,UAAGH,QAAH,EAAa;AACT,iCACOH,KADP;AAEIH,UAAAA,QAAQ,EAAEG,KAAK,CAACH,QAAN,CAAeW,GAAf,CAAmBH,GAAG,IAAG;AAC3B,gBAAIA,GAAG,CAACC,IAAJ,KAAaL,MAAM,CAACM,IAAP,CAAYD,IAA7B,EAAmC;AAC/B,uCACGD,GADH;AAEAI,gBAAAA,QAAQ,EAAEJ,GAAG,CAACI,QAAJ,GAAe;AAFzB;AAIH;;AACD,qCACOJ,GADP;AAGP,WAVS,CAFd,CAaI;;AAbJ;AAeH;;AACD,+BACOL,KADP;AAEIH,QAAAA,QAAQ,EAAE,CACN,GAAGG,KAAK,CAACH,QADH,EAENI,MAAM,CAACM,IAFD,CAFd,CAMI;;AANJ;;AAQJ,SAAKZ,WAAL;AACI,+BACOK,KADP;AAEIH,QAAAA,QAAQ,EAAEG,KAAK,CAACH,QAAN,CAAeW,GAAf,CAAmBH,GAAG,IAAG;AAC/B,cAAIA,GAAG,CAACC,IAAJ,KAAaL,MAAM,CAACM,IAAP,CAAYD,IAA7B,EAAmC;AAC/B,qCACOL,MAAM,CAACM,IADd;AAGH;;AACD,mCACOF,GADP;AAGH,SATS,CAFd,CAYI;;AAZJ;;AAcJ;AACI,aAAOL,KAAP;AA5CR;AA8CH,CA/CD,C,CAiDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,eAAeD,OAAf","sourcesContent":["import {\n    BUY_PRODUCT,\n    UPDATE_CART,\n} from '../action/ShopCar'\n\nconst initialState = {\n    cartDate: [],\n    totalCount: 0,\n};\nconst ShopCar = (state=initialState,action) => {\n    switch (action.type){\n        case BUY_PRODUCT:\n            const existing = state.cartDate.find(val => val.name === action.data.name);\n            if(existing) {\n                return { \n                    ...state,\n                    cartDate: state.cartDate.map(val=> {\n                            if (val.name === action.data.name) {\n                                return {\n                                ...val,\n                                quantity: val.quantity + 1,\n                                }\n                            }\n                            return {\n                                ...val,\n                            }\n                    }),\n                    // totalCount: state.cartDate.reduce(( acc, cur ) => acc + cur.quantity,0),\n                };\n            }\n            return { \n                ...state,\n                cartDate: [\n                    ...state.cartDate,\n                    action.data,\n                ],\n                // totalCount: state.cartDate.reduce(( acc, cur ) => acc + cur.quantity,0),\n            };\n        case UPDATE_CART: \n            return { \n                ...state,\n                cartDate: state.cartDate.map(val=> {\n                    if (val.name === action.data.name) {\n                        return {\n                            ...action.data,\n                        }   \n                    }\n                    return {\n                        ...val,\n                    }   \n                }),\n                // totalCount: state.cartDate.reduce(( acc, cur ) => acc + cur.quantity,0),\n            };\n        default:\n            return state;\n    }\n}\n\n// const Product = (state=[],action) => {\n//     switch (action.type){\n//         case 'BUY_PRODUCT':\n//             return{\n//                 id: action.id,\n//                 product: {...action.product},\n//                 quantity: action.quantity\n//             };\n//         case 'NOBUY_PRODUCT':\n//             return Object.assign([], state).filter(state=>{\n//                 return state.id !== action.id\n//             })\n//         case 'CHANGENUM_PRODUCT':\n//             if(state.id !== action.id)\n//                 return state;\n//             return Object.assign({},state,{\n//                 quantity: action.quantity\n//             })\n//         default:\n//             return state;\n//     }\n// }\n\n// const ShopCar = (state=[],action) => {\n//     switch (action.type){\n//         case 'BUY_PRODUCT':\n//             if(state.map(t => {return t.product.id}).indexOf(action.product.id) >= 0){\n//                 alert(\"此商品已加入購物車\");\n//                 return state;\n//             }\n//             else\n//                 return [\n//                     ...state,\n//                     Product(state,action)\n//                 ];\n//         case 'NOBUY_PRODUCT':\n//             return Product(state,action);\n//         case 'CHANGENUM_PRODUCT':\n//             return state.map(t=>Product(t,action));\n//         default:\n//             return state;\n//     }\n// }\n\nexport default ShopCar;"]},"metadata":{},"sourceType":"module"}