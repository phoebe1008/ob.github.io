{"ast":null,"code":"import Axios from 'axios'; //let nextBuyId = 0;\n//export const BUY_PRODUCT = 'BUY_PRODUCT'\n//export const NOBUY_PRODUCT = 'NOBUY_PRODUCT'\n//export const CHANGENUM_PRODUCT = 'CHANGENUM_PRODUCT'\n\nexport const getCart_DATA = 'getCart_DATA';\nexport const deleteCart_Success = 'deleteCart_Success';\nexport const updateCart_Success = 'deleteCart_Success'; // export function buyproduct(product,quantity){\n//     return{\n//         type : BUY_PRODUCT ,\n//         id : nextBuyId++,\n//         product,\n//         quantity\n//     };\n// }\n// export function nobuyproduct(id){\n//     return{\n//         type : NOBUY_PRODUCT ,\n//         id\n//     };\n// }\n// export function changenumproduct(id,quantity){\n//     return{\n//         type : CHANGENUM_PRODUCT ,\n//         id,\n//         quantity\n//     };\n// }\n\nexport function addCart(data) {\n  console.log('data', data);\n  return dispatch => {\n    Axios({\n      url: 'http://192.168.10.186:8888/api/cart',\n      method: 'POST',\n      data: data,\n      config: {\n        headers: {\n          'content-type': 'application/json'\n        }\n      }\n    }).then(res => {\n      console.log('123123123');\n      dispatch(getCart());\n    }).catch(err => {\n      console.log(\"1111\", err);\n    });\n  };\n}\n\nconst updateCartSuccess = data => ({\n  type: updateCart_Success,\n  data\n});\n\nexport function updateCart(data) {\n  return dispatch => {\n    Axios({\n      url: 'http://192.168.10.186:8888/api/cart',\n      method: 'PUT',\n      data: data,\n      headers: {\n        'content-type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    }).then(res => {\n      // dispatch(updateCartSuccess());\n      dispatch(getCart());\n    }).catch(err => {\n      console.log(\"1111\", err);\n    });\n  };\n}\n\nconst deleteCartSuccess = data => ({\n  type: deleteCart_Success,\n  data\n});\n\nexport function deleteCart(id) {\n  return dispatch => {\n    Axios({\n      url: \"http://192.168.10.186:8888/api/cart/\".concat(id),\n      method: 'DELETE',\n      config: {\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      }\n    }).then(res => {\n      if (res.data.statusCode === 0) {\n        alert('刪除成功'); // dispatch(deleteCartSuccess());\n\n        dispatch(getCart());\n      } else {\n        alert('刪除失敗');\n      }\n    }).catch(err => {\n      console.log(\"1111\", err);\n    });\n  };\n}\n\nconst getCartSuccess = data => ({\n  type: getCart_DATA,\n  data\n});\n\nexport function getCart() {\n  return dispatch => {\n    Axios({\n      url: 'http://192.168.10.186:8888/api/cart',\n      method: 'get',\n      config: {\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': 'http://192.168.10.186:8888/api/cart'\n        }\n      }\n    }).then(res => {\n      console.log(res);\n      dispatch(getCartSuccess(res.data));\n    }).catch(err => {\n      console.log(\"1111\", err);\n    });\n  };\n}","map":{"version":3,"sources":["/Users/phoebe/homework/obdesign/src/action/ShopCar.js"],"names":["Axios","getCart_DATA","deleteCart_Success","updateCart_Success","addCart","data","console","log","dispatch","url","method","config","headers","then","res","getCart","catch","err","updateCartSuccess","type","updateCart","deleteCartSuccess","deleteCart","id","statusCode","alert","getCartSuccess"],"mappings":"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","sourcesContent":["import Axios from 'axios';\n//let nextBuyId = 0;\n//export const BUY_PRODUCT = 'BUY_PRODUCT'\n//export const NOBUY_PRODUCT = 'NOBUY_PRODUCT'\n//export const CHANGENUM_PRODUCT = 'CHANGENUM_PRODUCT'\nexport const getCart_DATA = 'getCart_DATA';\nexport const deleteCart_Success = 'deleteCart_Success';\nexport const updateCart_Success = 'deleteCart_Success';\n\n\n\n// export function buyproduct(product,quantity){\n//     return{\n//         type : BUY_PRODUCT ,\n//         id : nextBuyId++,\n//         product,\n//         quantity\n//     };\n// }\n// export function nobuyproduct(id){\n//     return{\n//         type : NOBUY_PRODUCT ,\n//         id\n//     };\n// }\n// export function changenumproduct(id,quantity){\n//     return{\n//         type : CHANGENUM_PRODUCT ,\n//         id,\n//         quantity\n//     };\n// }\n\nexport function addCart(data) {\n    console.log('data',data);\n    return dispatch => {\n        Axios({\n            url:'http://192.168.10.186:8888/api/cart',\n            method: 'POST',\n            data: data,\n            config: {\n            headers: { \n                'content-type': 'application/json',\n            },\n            }\n        })\n        .then((res) => {\n            console.log('123123123');\n            dispatch(getCart());\n        })\n        .catch((err) => {\n            console.log(\"1111\", err);\n        })\n    }\n}\n\nconst updateCartSuccess = data => ({\n    type: updateCart_Success,\n    data,\n  });\n\nexport function updateCart(data) {\n    return dispatch => {\n        Axios({\n            url:'http://192.168.10.186:8888/api/cart',\n            method: 'PUT',\n            data: data,\n            headers: { \n                'content-type': 'application/json',\n                'Access-Control-Allow-Origin': '*',\n            },\n        })\n        .then((res) => {\n            // dispatch(updateCartSuccess());\n            dispatch(getCart());\n        })\n        .catch((err) => {\n            console.log(\"1111\", err);\n        })\n    }\n}\n\nconst deleteCartSuccess = data => ({\n    type: deleteCart_Success,\n    data,\n  });\n\nexport function deleteCart(id) {\n    return dispatch => {\n        Axios({\n            url:`http://192.168.10.186:8888/api/cart/${id}`,\n            method: 'DELETE',\n            config: { \n                headers: {\n                    'Content-Type': 'application/json',\n                    'Access-Control-Allow-Origin': '*',\n                }\n            },\n        })     \n        .then((res) => {\n            if (res.data.statusCode === 0) {\n                alert('刪除成功');\n                // dispatch(deleteCartSuccess());\n                dispatch(getCart());\n            } else {\n                alert('刪除失敗');\n            }\n        })\n        .catch((err) => {\n            console.log(\"1111\", err);\n        })\n    }\n}\n\nconst getCartSuccess = data => ({\n    type: getCart_DATA,\n    data,\n  });\n\nexport function getCart() {\nreturn dispatch => {\n    Axios({\n        url:'http://192.168.10.186:8888/api/cart',\n        method: 'get',\n        config: { \n            headers: {\n                'Content-Type': 'application/json',\n                'Access-Control-Allow-Origin': 'http://192.168.10.186:8888/api/cart',\n            }\n        },\n    })     \n    .then((res) => {\n        console.log(res);\n        dispatch(getCartSuccess(res.data));\n    })\n    .catch((err) => {\n        console.log(\"1111\", err);\n    })\n}\n}"]},"metadata":{},"sourceType":"module"}